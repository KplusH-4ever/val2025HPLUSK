<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Valentine's Game for Hydra</title>
    <style>
        body {
            background: linear-gradient(to bottom, #5a189a, #9d4edd);
            text-align: center;
            font-family: 'Arial', sans-serif;
            color: white;
            overflow: hidden;
        }
        canvas {
            display: block;
            margin: auto;
        }
        .note {
            display: none;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            padding: 20px;
            border-radius: 10px;
            color: black;
            font-size: 18px;
            max-width: 400px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h1>Catch the Hearts for a Surprise! ðŸ’œ</h1>
    <canvas id="gameCanvas"></canvas>
    <div class="note" id="loveNote">
        <p>Dear, Hydra...</p>
    </div>
    
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");
        canvas.width = 600;
        canvas.height = 400;

        // Create image objects
        const runFrame1 = new Image();
        const runFrame2 = new Image();
        const idleFrame = new Image();
        const heartTexture = new Image();

        // Set image sources
        runFrame1.src = 'https://cdn.discordapp.com/attachments/1321600535811326043/1340002950986338379/Untitled157_20250214184336.png';
        runFrame2.src = 'https://cdn.discordapp.com/attachments/1321600535811326043/1340003278112428153/Untitled157_20250214184350.png';
        idleFrame.src = 'https://cdn.discordapp.com/attachments/1321600535811326043/1340002951862685799/Untitled158_20250214185302.png';
        heartTexture.src = 'https://cdn.discordapp.com/attachments/1321600535811326043/1340002951862685799/Untitled158_20250214185302.png';

        // Wait until all images are loaded
        let imagesLoaded = 0;
        const totalImages = 4;
        
        function checkImagesLoaded() {
            imagesLoaded++;
            if (imagesLoaded === totalImages) {
                startGame();
            }
        }

        runFrame1.onload = checkImagesLoaded;
        runFrame2.onload = checkImagesLoaded;
        idleFrame.onload = checkImagesLoaded;
        heartTexture.onload = checkImagesLoaded;

        let hearts = [];
        let player = { x: 270, width: 60, height: 20, moving: false };
        let score = 0;
        let gameActive = true;

        function spawnHeart() {
            let heart = {
                x: Math.random() * (canvas.width - 20),
                y: 0,
                width: 20,
                height: 20,
                speed: 2
            };
            hearts.push(heart);
        }

        function update() {
            if (!gameActive) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Draw the player with the correct texture based on movement
            ctx.drawImage(player.moving ? (player.x % 2 === 0 ? runFrame1 : runFrame2) : idleFrame, player.x, canvas.height - 30, player.width, player.height);

            hearts.forEach((heart, index) => {
                heart.y += heart.speed;
                ctx.drawImage(heartTexture, heart.x - 10, heart.y - 10, heart.width, heart.height);

                if (heart.y > canvas.height - 30 && heart.x > player.x && heart.x < player.x + player.width) {
                    hearts.splice(index, 1);
                    score++;
                    if (score === 20) {
                        gameActive = false;
                        dropLoveNote();
                    }
                } else if (heart.y > canvas.height) {
                    gameActive = false;
                    alert("You missed a heart! Try again.");
                    location.reload();
                }
            });
            requestAnimationFrame(update);
        }

        function dropLoveNote() {
            let note = document.getElementById("loveNote");
            note.style.display = "block";
            note.style.top = "-100px";
            let yPos = -100;
            function fall() {
                if (yPos < 200) {
                    yPos += 2;
                    note.style.top = yPos + "px";
                    requestAnimationFrame(fall);
                }
            }
            fall();
        }

        document.addEventListener("mousemove", (event) => {
            player.x = event.clientX - canvas.getBoundingClientRect().left - player.width / 2;
            player.moving = true;
        });

        document.addEventListener("mouseleave", () => {
            player.moving = false;
        });

        setInterval(spawnHeart, 800);

        function startGame() {
            update();
        }
    </script>
</body>
</html>
